from Py4GWCoreLib import *

bot = Botting("Asura by Wick Divinus")

def Routine(bot: Botting) -> None:
    bot.Properties.ApplyNow("pause_on_danger", "active", True)
    bot.Properties.ApplyNow("halt_on_death","active", True)
    bot.Properties.ApplyNow("movement_timeout","value", 15000)
    bot.Properties.ApplyNow("auto_combat","active", True)
    
    bot.States.AddHeader("Travel to Ratasum")
    bot.Map.Travel(target_map_id=640) #Ratasum outpost
    bot.Party.SetHardMode(True)
    bot.States.AddHeader("EXIT OUTPOST HEADER")
    bot.Move.XY(-6062, -2688,"Exit Outpost")
    bot.Wait.ForMapLoad(target_map_name="Magus Stones")
    bot.Move.XY(15013, 13111)
    bot.Wait.ForTime(2000)
    bot.Interact.GetBlessing()
    bot.Wait.ForTime(6000)
    #bot.Move.XYAndDialog(14796, 13170,0x84)
    bot.Move.XY(16722, 11774, "Moving")
    #bot.Wait.UntilOnCombat()
    bot.Move.XY(17383, 8685, "Moving")
    #bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(18162, 6670, "First Spider Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    #bot.Wait.UntilOnCombat()
    bot.Move.XY(18447, 4537, "Second Spider Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(18331, 2108, "Spider Pop")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(17526, 143, "Spider Pop 2")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(17205, -1355, "Third Spider Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(17366, -5132, "Krait Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(18111, -8030, "Krait Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(18409, -8474, "Taking Blessing")
    bot.Wait.ForTime(2000)
    bot.Interact.GetBlessing()
    bot.Wait.ForTime(6000)
    #bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(18613, -11799, "Froggy Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(17154, -15669, "Krait Patrol")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(14250, -16744, "Second Patrol")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(12186, -14139, "Krait Patrol")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(12540, -13440, "Krait Patrol")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(13234, -9948, "Krait Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(8875, -9065, "Krait Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(4671, -8699, "Krait Patrol")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(1534, -5493, "Krait Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(1052, -7074, "Moving")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-1029, -8724, "Spider Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-3439, -10339, "Krait Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-3024, -12586, "Spider Cave")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-2797, -13645, "Spider Cave")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-3393, -15633, "Spider Cave")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-4635, -16643, "Spider Pop")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-7814, -17796, "Spider Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XYAndInteractNPC(-10109, -17520, "Taking Blessing")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-9111, -17237, "Moving")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-10963, -15506, "Ranger Boss Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-12885, -14651, "Froggy Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-13975, -17857, "Corner Spiders")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-11912, -10641, "Froggy Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-8760, -9933, "Krait Boss Warrior")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-14030, -9780, "Froggy Coing Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-12368, -7330, "Froggy Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-16527, -8175, "Froggy Patrol")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-17391, -5984, "Froggy Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-15704, -3996, "Froggy Patrol")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-16609, -2607, "Moving")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-15476, 186, "Moving")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-16480, 2522, "Krait Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-17090, 5252, "Krait Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XYAndInteractNPC(-19292, 8994, "Taking Blessing")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-18640, 8724, "Moving")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-18484, 12021, "Krait Patrol")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-17180, 13093, "Krait Patrol")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-15072, 14075, "Froggy Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-11888, 15628, "Froggy Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-12043, 18463, "Froggy Boss Warrior")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-8876, 17415, "Froggy Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-5778, 19838, "Froggy Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-10970, 16860, "Moving Back")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-9301, 15054, "Moving")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-5379, 16642, "Krait Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-4430, 17268, "Krait Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-2974, 14197, "Krait Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-5228, 12475, "Boss Patrol")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-3468, 10837, "Lonely Patrol")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XYAndInteractNPC(-2037, 10758, "Taking Blessing")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-3804, 8017, "Krait Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-1346, 12360, "Moving")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(874, 14367, "Moving")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(3572, 13698, "Krait Group Standing")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(5899, 14205, "Moving")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(7407, 11867, "Krait Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(9541, 9027, "Rider")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(12639, 7537, "Rider Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(9064, 7312, "Rider")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(7986, 4365, "Krait group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(6341, 3029, "Krait Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(7097, 92, "Krait Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XYAndInteractNPC(4893, 445, "Taking Blessing")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(8943, -985, "Krait Boss")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(10949, -2056, "Krait Patrol")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(13780, -5667, "Rider Patrol")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(12444, -793, "Moving Back")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(8193, -841, "Moving Back")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(3284, -1599, "Krait Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-76, -1498, "Krait Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(578, 719, "Krait Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(316, 2489, "Krait Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-1018, -1235, "Moving Back")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-3195, -1538, "Krait Patrol")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-6322, -2565, "Krait Group")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XYAndInteractNPC(-9231, -2629, "Taking Blessing")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-11414, 4055, "Leftovers Krait")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-6907, 8461, "Moving")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    bot.Move.XY(-8689, 11227, "Leftovers Krait and Rider")
    bot.Wait.UntilOutOfCombat(Range.Spellcast)
    #bot.Party.Resign()
    bot.Multibox.ResignParty()
    bot.Wait.ForMapToChange(target_map_id=640)
    #bot.UI.PrintMessageToConsole("Asura farm", "Finished routine")
    bot.States.JumpToStepName("[H]Travel to Ratasum_1")


    
bot.SetMainRoutine(Routine)


def main():
    bot.Update()
    bot.UI.draw_window()

if __name__ == "__main__":
    main()
